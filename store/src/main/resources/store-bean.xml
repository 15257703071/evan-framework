<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans-4.0.xsd">

    <description>文件存储服务 支持buket传参</description>

    <!-- 阿里云Oss Client 配置 -->
    <bean id="ossClient" class="com.aliyun.oss.OSSClient">
        <constructor-arg value="${oss.endpoint}"/>
        <constructor-arg value="${aliyun.accessKeyId}"/>
        <constructor-arg value="${aliyun.accessKeySecret}"/>
        <constructor-arg ref="ossConf"/>
    </bean>

    <bean id="ossConf" class="com.aliyun.oss.ClientConfiguration">
        <property name="maxConnections" value="1200"/>
        <property name="maxErrorRetry" value="5"/>
        <property name="connectionTimeout" value="50000"/>
        <property name="socketTimeout" value="90000"/>
        <!-- 从连接池中获取连接的超时时间（单位：毫秒）-->
        <property name="ConnectionRequestTimeout" value="50000"/>
    </bean>

    <bean id="ossStoreHelper" class="com.ancun.core.store.impl.OssStoreHelper" init-method="init"
          lazy-init="true">
        <property name="sysConfig" ref="sysConfig"></property>
        <property name="ossClient" ref="ossClient"></property>
    </bean>

    <!--
    <bean id="defaultBecCredentials" class="com.baidubce.auth.DefaultBceCredentials">
        <constructor-arg value="${baidubce.accessKeyId}"/>
        <constructor-arg value="${baidubce.secretKey}"/>
    </bean>

    <bean id="bosClientConfiguration" class="com.baidubce.services.bos.BosClientConfiguration">
        <property name="endpoint" value="${bos.endpoint}"></property>
        <property name="maxConnections" value="1200"></property>
        <property name="socketTimeoutInMillis" value="80000"></property>
        <property name="connectionTimeoutInMillis" value="80000"></property>
        <property name="credentials" ref="defaultBecCredentials"></property>
    </bean>

    <bean id="bosClient" class="com.baidubce.services.bos.BosClient">
        <constructor-arg ref="bosClientConfiguration"/>
    </bean>-->

    <bean id="bosStoreHelper" class="com.ancun.core.store.impl.BosStoreHelper" init-method="init"
          lazy-init="true">
        <property name="sysConfig" ref="sysConfig"></property>
        <!--<property name="bosClient" ref="bosClient"></property>-->
    </bean>

    <bean id="osStoreAdapter" class="com.ancun.core.store.impl.OsStoreAdapter">
        <property name="bosStoreHelper" ref="bosStoreHelper"></property>
        <property name="ossStoreHelper" ref="ossStoreHelper"></property>
    </bean>

    <bean id="storeService" class="com.ancun.core.store.impl.StoreServiceImpl" init-method="init">
        <property name="ossStoreHelper" ref="ossStoreHelper"></property>
        <property name="bosStoreHelper" ref="bosStoreHelper"></property>
        <property name="sysConfig" ref="sysConfig"></property>
    </bean>

    <bean id="osStoreServiceFactory" class="com.ancun.core.store.OsStoreServiceFactory">
    </bean>
</beans>
